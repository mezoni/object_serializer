classes:
  Foo:
    fields:
      bar: Bar
  Bar:
    fields:
      baz: Baz
  Baz:
    fields:
      date:
        type: DateTime
  Response:
    typeParameters: <T>
    fields:
      data:
        type: T
        serialize: |-
          (x) { return (data as dynamic).toJson; }
        deserialize: |-
          (x) { return _Generic.deserialize<T>(x as Map); }

serializers:
  DateTime:
    type: _DateTimeSerializer
    deserialize: |-
      final json = value as String;
      return DateTime.fromMicrosecondsSinceEpoch(int.parse(json));

    serialize: |-
      return value.microsecondsSinceEpoch.toString();

genericSerializer:
  name: _Generic
  types:
    - Bar
    - Baz
    - Foo
